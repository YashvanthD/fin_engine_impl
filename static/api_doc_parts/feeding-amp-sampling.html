<div class="section">
        <div class="section-header" onclick="toggleSection('section-feeding-sampling')">
            <span class="section-toggle">▾</span>
            <h2>Feeding &amp; Sampling</h2>
            <span class="pill">feeding, sampling</span>
        </div>
        <div id="section-feeding-sampling" class="section-body">
            <div class="card">
                <div class="card-header" onclick="toggleCard('card-feeding-create')">
                    <div class="endpoint"><span class="method method-post">POST</span> /feeding/</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-feeding-create" class="card-body">
                    <div class="small">Record feeding for a pond.</div>
                    <table class="fields-table">
                        <tr><th>Body field</th><th>Type</th><th>Req</th><th>Notes</th></tr>
                        <tr><td>pondId</td><td>string</td><td>Yes</td><td>Pond identifier</td></tr>
                        <tr><td>feedType</td><td>string</td><td>No</td><td>Feed description/type</td></tr>
                        <tr><td>quantity</td><td>float</td><td>No</td><td>Quantity fed</td></tr>
                        <tr><td>feedingTime</td><td>datetime/string</td><td>No</td><td>Time of feeding; if omitted, server may use created_at</td></tr>
                        <tr><td>recordedBy</td><td>string</td><td>No</td><td>Set automatically from token user_key</td></tr>
                        <tr><td>...</td><td>any</td><td>No</td><td>Additional DTO-supported fields</td></tr>
                    </table>
                    <div class="example small"><strong>Response (201):</strong> FeedingRecordDTO with <code>id</code>, <code>pondId</code>, <code>feedType</code>, <code>quantity</code>, <code>feedingTime</code>, <code>recordedBy</code>.</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-feeding-list')">
                    <div class="endpoint"><span class="method method-get">GET</span> /feeding/</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-feeding-list" class="card-body">
                    <div class="small">List feeding records, optionally filtered by pond.</div>
                    <table class="fields-table">
                        <tr><th>Query</th><th>Type</th><th>Req</th><th>Notes</th></tr>
                        <tr><td>pondId / pond_id</td><td>string</td><td>No</td><td>Filter by pond</td></tr>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-feeding-pond-id')">
                    <div class="endpoint"><span class="method method-get">GET</span> /feeding/pond/&lt;pond_id&gt;</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-feeding-pond-id" class="card-body">
                    <div class="small">List feeding records for a specific pond (no auth enforced here).</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-api-feeding')">
                    <div class="endpoint"><span class="method method-post">POST</span> /api/feeding</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-api-feeding" class="card-body">
                    <div class="small">Compatibility endpoint, same as <code>POST /feeding/</code>.</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-api-feeding-get')">
                    <div class="endpoint"><span class="method method-get">GET</span> /api/feeding</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-api-feeding-get" class="card-body">
                    <div class="small">Compatibility endpoint, same as <code>GET /feeding/</code>.</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-api-feeding-pond-id')">
                    <div class="endpoint"><span class="method method-get">GET</span> /api/feeding/pond/&lt;pond_id&gt;</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-api-feeding-pond-id" class="card-body">
                    <div class="small">Compatibility endpoint, same as <code>GET /feeding/pond/&lt;pond_id&gt;</code>.</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-sampling-create')">
                    <div class="endpoint"><span class="method method-post">POST</span> /sampling/</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-sampling-create" class="card-body">
                    <div class="small">Create sampling/growth records (uses GrowthRecordDTO internally).</div>
                    <table class="fields-table">
                        <tr><th>Body field</th><th>Type</th><th>Req</th><th>Notes</th></tr>
                        <tr><td>pondId</td><td>string</td><td>Yes</td><td>Pond identifier</td></tr>
                        <tr><td>species</td><td>string</td><td>Yes</td><td>Fish species code/id</td></tr>
                        <tr><td>sampleSize</td><td>int</td><td>No</td><td>Number of fish sampled</td></tr>
                        <tr><td>averageWeight</td><td>float</td><td>No</td><td>Average weight from samples (kg)</td></tr>
                        <tr><td>cost</td><td>float</td><td>No</td><td>Cost value (interpreted according to <code>costUnit</code>)</td></tr>
                        <tr><td>costUnit / cost_unit</td><td>string</td><td>No</td><td>One of <code>kg</code> (default) or <code>unit</code>/<code>per_fish</code> etc. Controls how <code>cost</code> is applied</td></tr>
                        <tr><td>totalAmount / total_amount</td><td>float</td><td>No</td><td>If provided, server stores this as the final amount (overrides computed amount). Otherwise server computes total using <code>cost</code>, <code>averageWeight</code> (min 1kg when <1kg) and <code>sampleSize</code>.</td></tr>
                        <tr><td>type</td><td>string</td><td>No</td><td>Optional metadata; default saved value is <code>sampling</code></td></tr>
                        <tr><td>recordedBy</td><td>string</td><td>No</td><td>Set automatically from token <code>user_key</code> when omitted</td></tr>
                        <tr><td>notes</td><td>string</td><td>No</td><td>Free-form notes</td></tr>
                        <tr><td>...</td><td>any</td><td>No</td><td>Other DTO-supported growth fields</td></tr>
                    </table>
                    <div class="example small"><strong>Response (201):</strong> GrowthRecordDTO with at least <code>id</code>, <code>pondId</code>, <code>species</code>, <code>samplingDate</code>, <code>sampleSize</code>, <code>averageWeight</code>, <code>cost</code>, <code>recordedBy</code>, and any extra metadata like <code>totalAmount</code> (also stored in DB as <code>total_cost</code>).</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-sampling-update')">
                    <div class="endpoint"><span class="method method-put">PUT</span> /sampling/&lt;sampling_id&gt;</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-sampling-update" class="card-body">
                    <div class="small">Correct or update an existing sampling record. Provide the sampling identifier (Mongo _id or <code>sampling_id</code> stored on creation).</div>
                    <table class="fields-table">
                        <tr><th>Body field</th><th>Type</th><th>Req</th><th>Notes</th></tr>
                        <tr><td>pondId</td><td>string</td><td>No</td><td>Change pond association</td></tr>
                        <tr><td>species</td><td>string</td><td>No</td><td>Change species</td></tr>
                        <tr><td>samplingDate / sampling_date</td><td>datetime/string</td><td>No</td><td>ISO-format date or epoch</td></tr>
                        <tr><td>sampleSize / sample_size</td><td>int</td><td>No</td><td>Update sample count</td></tr>
                        <tr><td>averageWeight / average_weight</td><td>float</td><td>No</td><td>Update average weight</td></tr>
                        <tr><td>cost / cost_amount</td><td>float</td><td>No</td><td>Unit price</td></tr>
                        <tr><td>costUnit / cost_unit</td><td>string</td><td>No</td><td>Unit for the cost (kg or unit)</td></tr>
                        <tr><td>totalAmount / total_amount</td><td>float</td><td>No</td><td>Direct override of computed total (will be stored to <code>total_cost</code>)</td></tr>
                        <tr><td>notes</td><td>string</td><td>No</td><td>Free-form notes</td></tr>
                        <tr><td>extra</td><td>object</td><td>No</td><td>Any extra keys to store on the record</td></tr>
                    </table>
                    <div class="note small">Behavior notes: the endpoint updates only the fields present in the request. Account scoping is enforced — callers may only update records within their account.</div>
                    <div class="curl"><strong>Request:</strong><br><pre>curl -X PUT "http://localhost:5000/sampling/SAMP-20260102191530-4287" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ACCESS_TOKEN" \
  -d '{"sampleSize": 120, "totalAmount": 2400}'</pre></div>
                    <div class="example small"><strong>Response (200):</strong><br><pre>{
  "success": true,
  "data": {
    "id": "...",
    "pondId": "POND1",
    "species": "tilapia",
    "sampleSize": 120,
    "totalAmount": 2400,
    "cost": 20,
    "recordedBy": "USR001",
    "sampling_id": "SAMP-20260102191530-4287"
  }
}</pre></div>
                </div>
            </div>

            <div class="card">
                <div class="card-header" onclick="toggleCard('card-sampling-history')">
                    <div class="endpoint"><span class="method method-get">GET</span> /sampling/history</div>
                    <span class="card-toggle">▾ details</span>
                </div>
                <div id="card-sampling-history" class="card-body">
                    <div class="small">Return sampling history. This endpoint is also available under <code>/api/sampling/history</code> for compatibility.</div>
                    <table class="fields-table">
                        <tr><th>Query</th><th>Type</th><th>Req</th><th>Notes</th></tr>
                        <tr><td>startDate / start_date / from</td><td>datetime|string|epoch</td><td>No</td><td>Start of sampling date range (ISO or epoch). Inclusive.</td></tr>
                        <tr><td>endDate / end_date / to</td><td>datetime|string|epoch</td><td>No</td><td>End of sampling date range (ISO or epoch). Inclusive.</td></tr>
                        <tr><td>pondId / pond_id / pond</td><td>string</td><td>No</td><td>Filter by pond identifier</td></tr>
                        <tr><td>species</td><td>string</td><td>No</td><td>Filter by species code/id</td></tr>
                        <tr><td>limit</td><td>int</td><td>No</td><td>Maximum rows returned (default <code>10</code>)</td></tr>
                    </table>
                    <div class="example small"><strong>Response (200):</strong> An array of sampling/growth records (normalized). Typical fields returned include:</div>
                    <table class="fields-table">
                        <tr><th>Field</th><th>Type</th><th>Notes</th></tr>
                        <tr><td>id</td><td>string</td><td>Record identifier</td></tr>
                        <tr><td>pondId</td><td>string</td><td>Pond identifier</td></tr>
                        <tr><td>species</td><td>string</td><td>Species code</td></tr>
                        <tr><td>samplingDate</td><td>datetime string</td><td>ISO-format sampling date</td></tr>
                        <tr><td>sampleSize</td><td>int</td><td>Number of fish sampled</td></tr>
                        <tr><td>averageWeight</td><td>float</td><td>Average sample weight (kg)</td></tr>
                        <tr><td>cost</td><td>float</td><td>Cost per unit (per kg or per fish depending on <code>costUnit</code>)</td></tr>
                        <tr><td>totalAmount / total_cost</td><td>float</td><td>Total computed or provided amount (stored in DB as <code>total_cost</code>)</td></tr>
                        <tr><td>costUnit / cost_unit</td><td>string</td><td>Unit used for cost interpretation (e.g. <code>kg</code>, <code>unit</code>)</td></tr>
                        <tr><td>recordedBy</td><td>string</td><td>User who recorded the sample</td></tr>
                        <tr><td>notes</td><td>string</td><td>Optional notes</td></tr>
                    </table>
                    <div class="curl"><strong>Example:</strong><br><pre>curl "http://localhost:5000/sampling/history?pondId=POND123&species=tilapia&limit=5"

# Compatibility mirror
curl "http://localhost:5000/api/sampling/history?pondId=POND123&limit=5"</pre></div>
                </div>
            </div>


    </div>

</div>